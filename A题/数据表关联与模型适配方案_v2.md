# MCM 2026 A题：完整模型组合与数据适配方案 (v2.0)

> **Version**: 2.0 (E1/E2/E3 升级为 MUST)  
> **Date**: 2026-01-30  
> **Status**: 数据验证完成 ✅  
> **关键更新**: E1波动建模、E2温度耦合、E3老化建模升级为必做项

---

## 目录

1. [模型组合方案 (E1-E3 → MUST)](#1-模型组合方案)
2. [数据文件完整性验证](#2-数据文件完整性验证)
3. [数据表关联设计](#3-数据表关联设计)
4. [预处理需求清单](#4-预处理需求清单)
5. [Task 1-4 数据流可行性分析](#5-task-1-4-数据流可行性分析)
6. [数据质量检查清单](#6-数据质量检查清单)
7. [实施优先级与时间线](#7-实施优先级与时间线)

---

## 1. 模型组合方案

### 1.1 核心模型 (全部 MUST)

| ID | 模型名称 | 数学形式 | 优先级 | 数据支撑 | 论文Task映射 |
|----|---------|---------|--------|----------|-------------|
| **M1** | SOC微分方程 | `dSOC/dt = -P_total(t) / Q_eff` | 🔴 MUST | master_table | Task 1 |
| **M2** | 功耗分解(5因子) | `P_total = P_screen + P_proc + P_net + P_GPS + P_bg` | 🔴 MUST | aggregated.csv | Task 1 |
| **M3** | TTE积分 | `TTE = ∫[0,t*]dt, SOC(t*)=5%` | 🔴 MUST | 派生 | Task 2 |
| **M4** | 95% Bootstrap CI | `CI = [percentile_2.5, percentile_97.5]` | 🔴 MUST | 派生 | Task 2 |
| **M5** | Sobol敏感性 | `S_i = Var(E[Y\|X_i]) / Var(Y)` | 🔴 MUST | 派生 | Task 3 |
| **M6** | OCV(SOC)多项式 | `V = c0 + c1·SOC + ... + c5·SOC^5` | 🔴 MUST | battery_state_table | Task 1 |
| **M7** | Well/Poorly判定 | `MAPE < 15% → Well; ≥20% → Poorly` | 🔴 MUST | 派生 | Task 2 |
| **M8** | 建议-模型追溯 | `Recommendation ← ∂TTE/∂param` | 🔴 MUST | 敏感性结果 | Task 4 |

### 1.2 升级模型 (原COULD → 现MUST)

| ID | 模型名称 | 数学形式 | 优先级变更 | 升级理由 | 数据支撑 |
|----|---------|---------|-----------|---------|---------|
| **E1** | 波动建模(OU过程) | `dX = θ(μ-X)dt + σdW` | 🟢→🔴 **MUST** | 原文明确要求"fluctuations in usage patterns" | aggregated.csv统计量 |
| **E2** | 温度耦合 | `Q_eff(T) = Q_nom × f_temp(T)` | 🟢→🔴 **MUST** | 原文提及"temperature further complicate" | temp_c列、Oxford数据 |
| **E3** | 电池老化 | `SOH = Q_actual/Q_design, f_aging(cycles)` | 🟢→🔴 **MUST** | 原文要求"Consider how battery aging" | battery_state_table SOH |

### 1.3 可选扩展模型 (保持 COULD)

| ID | 模型名称 | 数学形式 | 优先级 | 数据支撑 |
|----|---------|---------|--------|---------|
| **E4** | 交互项 | `P_total += Σα_ij·P_i·P_j` | 🟢 COULD | aggregated.csv |
| **E5** | SHAP解释 | `φ_i = contribution to TTE` | 🟢 COULD | 模型结果 |

---

## 2. 数据文件完整性验证

### 2.1 核心数据表 (逐行验证结果)

| 文件名 | 期望行数 | 实际行数 | 列数 | 验证状态 |
|-------|---------|---------|------|---------|
| `MCM2026A题锂电池数据表：master_modeling_table.csv` | 36,000 | **36,001** (含表头) | 93 | ✅ **完整** |
| `MCM2026_battery_state_table.csv` | 36 | **37** (含表头) | 15 | ✅ **完整** |
| `锂电池数据集：变量字典.csv` | ~94 | **95** (含表头) | 5 | ✅ **完整** |
| `open_data/.../aggregated.csv` | 1,000 | **1,001** (含表头) | 67 | ✅ **完整** |

### 2.2 原始数据源验证

| 数据源 | 文件 | 验证状态 | 行数/条目 | 关键字段 |
|-------|------|---------|----------|---------|
| **AndroWatts (Zenodo)** | `aggregated.csv` | ✅ | 1000测试 | ID, *_ENERGY_UW, BATTERY__PERCENT |
| **Mendeley (电池老化)** | `Dataset#3.xlsx` | ✅ | 3 cells × 多样本 | Cell01/02/03 sheets |
| **Mendeley** | `Dataset#5.xlsx` | ✅ | 3 cells × 多样本 | Cell01/02/03 sheets |
| **Apple Specs** | `apple_iphone_battery_specs.csv` | ✅ | 13机型 | Video_Playback_h, Design_Cycle_Life |
| **Oxford** | `oxford_summary.csv` | ✅ | 8 cells | Capacity_Fade_Pct, Total_Cycles |
| **NASA** | `metadata.csv` | ✅ | 7567记录 | Capacity, ambient_temperature |

### 2.3 辅助数据验证

| 文件路径 | 用途 | 行数 | 状态 |
|---------|------|------|------|
| `oxford_cell1_cycles.csv` | E3老化验证 | 158 | ✅ |
| `oxford_cell2_cycles.csv` | E3老化验证 | 147 | ✅ |
| `oxford_cell3_cycles.csv` | E3老化验证 | 153 | ✅ |
| ...(oxford_cell4-8) | E3老化验证 | ~100-160 | ✅ |

---

## 3. 数据表关联设计

### 3.1 核心关联架构 (基于用户说明文档)

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           数据表关联架构 (核心)                                    │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                  │
│   ┌───────────────────────┐         ┌───────────────────────┐                   │
│   │   AndroWatts 数据     │         │   Mendeley 电池数据    │                   │
│   │  (aggregated.csv)     │         │ (Dataset#3/#5.xlsx)    │                   │
│   │   1000 条功耗测试     │         │   6 cells × 多样本     │                   │
│   └───────────┬───────────┘         └───────────┬───────────┘                   │
│               │                                 │                               │
│               │    预处理                        │    预处理                      │
│               ↓                                 ↓                               │
│   ┌───────────────────────┐         ┌───────────────────────┐                   │
│   │   功耗特征表           │         │   电池状态表            │                   │
│   │   phone_test_id       │         │  battery_state_id     │                   │
│   │   P_total_uW          │         │  Q_full_Ah, SOH       │                   │
│   │   soc0, temp_c        │         │  ocv_c0 ~ ocv_c5      │                   │
│   │   I_obs_A             │         │  (36 种老化状态)       │                   │
│   │   (1000 行)           │         │                        │                   │
│   └───────────┬───────────┘         └───────────┬───────────┘                   │
│               │                                 │                               │
│               └─────────────┬───────────────────┘                               │
│                             │                                                   │
│                    笛卡尔积 (Cartesian Product)                                  │
│                   1000 × 36 = 36,000 行                                          │
│                             │                                                   │
│                             ↓                                                   │
│   ┌─────────────────────────────────────────────────────────────────────────┐   │
│   │                     主表 (Master Modeling Table)                         │   │
│   │         PRIMARY KEY: (phone_test_id, battery_state_id)                  │   │
│   │                       36,000 行 × 93 列                                  │   │
│   │                                                                          │   │
│   │   字段组成:                                                               │   │
│   │   ├── AndroWatts 原始字段 (69列): *_ENERGY_UW, *_FREQ_KHz, etc.          │   │
│   │   ├── 电池状态字段 (15列): Q_full_Ah, SOH, ocv_c0~c5, etc.              │   │
│   │   └── 派生字段: dSOC_dt_est_per_s, t_empty_h_est, etc.                  │   │
│   └─────────────────────────────────────────────────────────────────────────┘   │
│                                                                                  │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 关键字段关联映射

| 主表字段 | 来源表 | 原始字段 | 转换公式 |
|---------|-------|---------|---------|
| `phone_test_id` | aggregated.csv | `ID` | 直接重命名 |
| `battery_state_id` | Mendeley派生 | Dataset+Cell+Label | 组合生成 |
| `soc0` | aggregated.csv | `BATTERY__PERCENT` | `/100` |
| `temp_c` | aggregated.csv | `AVG_SOC_TEMP` | `/1000` (m°C→°C) |
| `I_obs_A` | aggregated.csv | `BATTERY_DISCHARGE_RATE_UAS` | `×1e-6` |
| `P_total_uW` | aggregated.csv | `sum(*_ENERGY_UW)` | 合计 |
| `Q_full_Ah` | Mendeley | 最高电压列容量 | 直接提取 |
| `SOH` | Mendeley派生 | `Q_full/Q_full_new` | 计算 |
| `Q_eff_C` | 派生 | `Q_full_Ah × 3600` | 转换 |
| `ocv_c0~c5` | Mendeley派生 | 5次多项式拟合 | 最小二乘 |

### 3.3 辅助表关联 (用于验证和扩展)

```
┌───────────────────────────────────────────────────────────────────────────────┐
│                        辅助数据表关联 (验证 & 扩展)                             │
├───────────────────────────────────────────────────────────────────────────────┤
│                                                                                │
│   ┌─────────────────┐    验证 TTE     ┌─────────────────────┐                 │
│   │  Apple Specs    │───────────────→│  Task 2: TTE预测    │                 │
│   │  (13 机型)       │  参考基准       │  "observed behavior" │                │
│   └─────────────────┘                 └─────────────────────┘                 │
│                                                                                │
│   ┌─────────────────┐    验证 E3      ┌─────────────────────┐                 │
│   │  Oxford Data    │───────────────→│  E3: 老化模型验证    │                 │
│   │  (8 cells)      │  20-38% 衰减    │  Capacity_Fade_Pct  │                 │
│   └─────────────────┘                 └─────────────────────┘                 │
│                                                                                │
│   ┌─────────────────┐    验证 E2      ┌─────────────────────┐                 │
│   │  NASA Data      │───────────────→│  E2: 温度影响验证    │                 │
│   │  (7567 记录)    │  ambient_temp   │  f_temp(T) 校准     │                 │
│   └─────────────────┘                 └─────────────────────┘                 │
│                                                                                │
└───────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. 预处理需求清单

### 4.1 AndroWatts 数据预处理 (aggregated.csv)

| 步骤 | 原始字段 | 处理方式 | 目标字段 | 优先级 |
|-----|---------|---------|---------|--------|
| 1 | `ID` | 重命名 | `phone_test_id` | 🔴 MUST |
| 2 | `AVG_SOC_TEMP` | `÷1000` (m°C→°C) | `temp_c` | 🔴 MUST |
| 3 | `BATTERY__PERCENT` | `÷100` | `soc0` | 🔴 MUST |
| 4 | `BATTERY_DISCHARGE_RATE_UAS` | `×1e-6` | `I_obs_A` | 🔴 MUST |
| 5 | `*_ENERGY_UW` (25列) | `sum()` | `P_total_uW` | 🔴 MUST |
| 6 | `*_ENERGY_AVG_UWS` (25列) | `sum()` | `E_total_uWh_est` | 🟡 SHOULD |
| 7 | `CPU_MID_FREQ_KHz` | 处理"err"值 | 数值/NaN | 🟡 SHOULD |

### 4.2 Mendeley 电池数据预处理 (Dataset#3/#5.xlsx)

| 步骤 | 处理内容 | 方法 | 优先级 |
|-----|---------|------|--------|
| 1 | 读取 Cell01/02/03 sheets | pandas.read_excel | 🔴 MUST |
| 2 | 识别电压列 (形如"x V") | 正则匹配 | 🔴 MUST |
| 3 | 提取 Q_full_Ah | 取最高电压列容量 | 🔴 MUST |
| 4 | 计算 SOH | `Q_full / Q_full_new` | 🔴 MUST |
| 5 | 选取6个老化档位 | new/slight/moderate/aged/old/eol | 🔴 MUST |
| 6 | 拟合 OCV(SOC) 多项式 | 5次最小二乘拟合 | 🔴 MUST |
| 7 | 输出 ocv_c0~c5 系数 | 存入battery_state_table | 🔴 MUST |

### 4.3 派生字段计算

| 字段 | 公式 | 依赖字段 | 用途 |
|-----|------|---------|------|
| `Q_eff_C` | `Q_full_Ah × 3600` | Q_full_Ah | M1 SOC ODE |
| `dSOC_dt_est_per_s` | `-I_obs_A / Q_eff_C` | I_obs_A, Q_eff_C | 初始化估算 |
| `t_empty_h_est` | `soc0 / (-dSOC/dt) / 3600` | soc0, dSOC/dt | 快速验证 |
| `duration_h_est` | `E_total / P_total` | E_total, P_total | 测试时长 |

### 4.4 数据质量处理

| 问题类型 | 影响字段 | 处理方案 | 影响行数 |
|---------|---------|---------|---------|
| "err"字符串 | `CPU_MID_FREQ_KHz` | 转换为 `NaN`，使用插值/中位数填充 | ~5-10行 |
| 重复列名 | `Memory_ENERGY_AVG_UWS.1` | 保留或合并 | 全部 |
| 极端值 | `BATTERY_DISCHARGE_TOTAL_UA < 0` | 保留(放电为负) | 正常 |
| 缺失值 | 少量单元格 | 使用列中位数填充 | <1% |

---

## 5. Task 1-4 数据流可行性分析

### 5.1 Task 1: 连续时间模型 - 数据流

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Task 1 数据流                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   输入数据                        模型计算                       输出         │
│   ┌─────────────┐                                                           │
│   │ Master Table│                                                           │
│   │ (36000行)   │                                                           │
│   └──────┬──────┘                                                           │
│          │                                                                  │
│          ├──→ P_total_uW ──→ [M2] P = Σ P_i ──→ 功耗分解表                  │
│          │                                                                  │
│          ├──→ Q_eff_C, soc0 ──→ [M1] dSOC/dt = -P/Q ──→ SOC(t)曲线         │
│          │                                                                  │
│          ├──→ ocv_c0~c5 ──→ [M6] V(SOC) 多项式 ──→ 电压曲线                 │
│          │                                                                  │
│          └──→ temp_c ──→ [E2] Q_eff(T) = Q × f(T) ──→ 温度修正SOC(t)        │
│                                                                              │
│   可行性: ✅ 100%                                                            │
│   数据完整度: ✅ 所有必需字段已验证                                           │
│   预处理完成度: ✅ 主表已完成预处理                                           │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5.2 Task 2: TTE预测 - 数据流

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Task 2 数据流                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   输入数据                        模型计算                       输出         │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ SOC(t) 曲线 │──→ [M3] TTE = ∫dt until SOC=5% ──→ TTE预测值              │
│   └─────────────┘                                                           │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ 参数分布    │──→ [M4] Bootstrap (n=1000) ──→ 95% CI                     │
│   └─────────────┘                                                           │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ Apple Specs │──→ [M7] MAPE计算 ──→ Well/Poorly判定                      │
│   │ (验证基准)  │                                                           │
│   └─────────────┘                                                           │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ 5种场景定义 │──→ 场景模拟 ──→ TTE × 场景矩阵 (20个预测点)               │
│   │ (S1-S5)     │                                                           │
│   └─────────────┘                                                           │
│                                                                              │
│   可行性: ✅ 100%                                                            │
│   验证数据: ✅ Apple Specs提供13机型参考                                      │
│   场景支撑: ✅ aggregated.csv包含多种功耗模式                                 │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5.3 Task 3: 敏感性分析 - 数据流

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Task 3 数据流                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   输入数据                        模型计算                       输出         │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ 模型参数    │──→ [M5] Sobol指数 ──→ 参数敏感性排序                       │
│   │ (P_i, Q, T) │                                                           │
│   └─────────────┘                                                           │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ aggregated  │──→ [E1] OU过程拟合 ──→ 波动参数 (μ, σ, θ)                 │
│   │ 统计量      │      dX = θ(μ-X)dt + σdW                                  │
│   └─────────────┘                                                           │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ 假设变体    │──→ 假设测试 ──→ Δ_assumption 影响量化                     │
│   │ (线性/非线性)│                                                           │
│   └─────────────┘                                                           │
│                                                                              │
│   可行性: ✅ 100%                                                            │
│   E1波动数据: ✅ aggregated.csv含1000个功耗样本，可计算μ/σ                   │
│   假设测试: ✅ 主表包含新旧电池对比数据                                        │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5.4 Task 4: 建议 - 数据流

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Task 4 数据流                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   输入数据                        模型计算                       输出         │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ 敏感性排序  │──→ [M8] ∂TTE/∂param ──→ 用户建议 + 量化收益                │
│   └─────────────┘                                                           │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ SOH数据     │──→ [E3] f_aging(cycles) ──→ 老化阈值 & 行动建议            │
│   │ (0.63~1.0)  │                                                           │
│   └─────────────┘                                                           │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ Oxford Data │──→ [E3验证] Capacity_Fade_Pct ──→ 老化模型校准             │
│   │ (20-38%衰减)│                                                           │
│   └─────────────┘                                                           │
│                                                                              │
│   ┌─────────────┐                                                           │
│   │ 功耗分解    │──→ OS优化策略 ──→ 伪代码 + 预期收益                        │
│   └─────────────┘                                                           │
│                                                                              │
│   可行性: ✅ 100%                                                            │
│   E3老化数据: ✅ battery_state_table含SOH 0.63~1.0完整范围                   │
│   验证数据: ✅ Oxford提供8 cells真实衰减数据                                  │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5.5 整体可行性评估

| Task | 数据完备性 | 模型支撑 | 可行性评分 | 风险项 |
|------|-----------|---------|-----------|--------|
| **Task 1** | ✅ 100% | M1, M2, M6, E2 | **100%** | 无 |
| **Task 2** | ✅ 100% | M3, M4, M7 | **100%** | 无 |
| **Task 3** | ✅ 100% | M5, E1 | **100%** | E1需从aggregated统计量拟合 |
| **Task 4** | ✅ 100% | M8, E3 | **100%** | E3需Oxford数据验证 |

---

## 6. 数据质量检查清单

### 6.1 主表检查 (master_modeling_table.csv)

| 检查项 | 预期值 | 实际值 | 状态 | 备注 |
|-------|-------|-------|------|------|
| 行数 | 36,000 | 36,001 (含表头) | ✅ | 1000×36=36000 |
| 列数 | 93 | 93 | ✅ | - |
| 主键唯一性 | 36,000 unique | 待验证 | ⚠️ | 运行时检查 |
| phone_test_id范围 | [0, 999] | [0, 999] | ✅ | - |
| SOH范围 | [0.6, 1.0] | [0.63, 1.0] | ✅ | - |
| Q_full_Ah范围 | >0 | [1.7, 28.1] | ✅ | Dataset#3小电池, #5大电池 |
| temp_c范围 | [0, 60] | [33.2, 46.6] | ✅ | 室温范围合理 |
| soc0范围 | [0, 1] | 主要集中在0.36-1.0 | ✅ | - |

### 6.2 功耗字段检查 (aggregated.csv来源)

| 字段 | 预期单位 | 有效范围 | 异常值处理 |
|-----|---------|---------|-----------|
| `*_ENERGY_UW` | µW | >0 | 0值正常(组件未使用) |
| `BATTERY_DISCHARGE_TOTAL_UA` | µA | <0(放电) | 负值正常 |
| `CPU_MID_FREQ_KHz` | kHz | >0 或 "err" | "err"→NaN |
| `AVG_SOC_TEMP` | m°C | [30000, 50000] | 转换为°C |

### 6.3 电池状态字段检查

| 字段 | 预期范围 | 物理意义验证 |
|-----|---------|-------------|
| `ocv_c0` | [2.5, 4.2] | OCV截距(空电池~新电池) |
| `ocv_c1~c5` | 任意实数 | 多项式系数 |
| `Q_eff_C` | >0 | 库仑量，应为Q_full_Ah×3600 |
| `SOH` | [0.6, 1.0] | 6档位: new~eol |

### 6.4 验证数据检查

| 数据源 | 检查项 | 状态 |
|-------|-------|------|
| **Apple Specs** | Video_Playback_h ∈ [17, 29] | ✅ |
| **Apple Specs** | Design_Cycle_Life ∈ {500, 1000} | ✅ |
| **Oxford** | Capacity_Fade_Pct ∈ [20, 38] | ✅ |
| **Oxford** | Total_Cycles ∈ [46, 78] | ✅ |
| **NASA** | Capacity > 0 | ✅ |

---

## 7. 实施优先级与时间线

### 7.1 模型实施顺序 (考虑依赖关系)

```
Phase 1 (Hour 12-24): 核心模型
├── M2 功耗分解 ──→ 从aggregated.csv提取P_i
├── M1 SOC ODE ──→ 使用M2输出 + Q_eff
└── M6 OCV多项式 ──→ 从battery_state_table读取

Phase 2 (Hour 24-36): 预测模型
├── M3 TTE积分 ──→ 使用M1输出
├── M4 Bootstrap CI ──→ 在M3上运行
└── M7 Well/Poorly ──→ 对比Apple Specs

Phase 3 (Hour 36-48): 敏感性 & 扩展
├── M5 Sobol分析 ──→ 使用M1-M4
├── E1 波动建模 ──→ 从aggregated统计量拟合
├── E2 温度耦合 ──→ 使用temp_c修正M1
└── E3 老化建模 ──→ 使用SOH数据

Phase 4 (Hour 48-60): 建议生成
├── M8 建议追溯 ──→ 使用M5敏感性排序
└── 整合检验 ──→ Oxford数据验证E3
```

### 7.2 数据加载代码模板

```python
import pandas as pd
import numpy as np

# ===== 1. 主表加载 =====
master_table = pd.read_csv(
    'battery_data/MCM2026A题锂电池数据表：master_modeling_table.csv'
)
print(f"主表: {len(master_table)} 行, {len(master_table.columns)} 列")

# ===== 2. 电池状态表加载 =====
battery_state = pd.read_csv('battery_data/MCM2026_battery_state_table.csv')
print(f"电池状态: {len(battery_state)} 种")

# ===== 3. 验证数据加载 =====
apple_specs = pd.read_csv('battery_data/apple/apple_iphone_battery_specs.csv')
oxford_summary = pd.read_csv('battery_data/kaggle/oxford/oxford_summary.csv')

# ===== 4. 数据质量检查 =====
assert len(master_table) == 36000, "主表行数异常"
assert master_table['SOH'].between(0.6, 1.01).all(), "SOH范围异常"
assert master_table['Q_full_Ah'].gt(0).all(), "Q_full_Ah必须为正"

# ===== 5. 关键字段提取 =====
# M1所需
Q_eff_C = master_table['Q_eff_C'].values
soc0 = master_table['soc0'].values

# M2所需 - 功耗分解
power_cols = [c for c in master_table.columns if c.endswith('_ENERGY_UW')]
P_components = master_table[power_cols]

# E2所需 - 温度
temp_c = master_table['temp_c'].values

# E3所需 - 老化
SOH = master_table['SOH'].values

print("✅ 数据加载完成，可开始建模")
```

---

## 附录 A: 变量字典摘要

| 变量 | 单位 | 定义 | 模型用途 |
|-----|------|------|---------|
| `phone_test_id` | - | 功耗测试编号 | 主键 |
| `battery_state_id` | - | 电池状态编号 | 主键 |
| `Q_full_Ah` | Ah | 满充容量 | M1 |
| `SOH` | 1 | 健康度 | E3 |
| `Q_eff_C` | C | 有效电荷 | M1 |
| `soc0` | 1 | 初始SOC | M1 |
| `temp_c` | °C | 温度 | E2 |
| `I_obs_A` | A | 放电电流 | M1 |
| `P_total_uW` | µW | 总功耗 | M2 |
| `ocv_c0~c5` | V | OCV系数 | M6 |

---

## 附录 B: 数据源引用

| 数据集 | URL | License | DOI |
|-------|-----|---------|-----|
| AndroWatts | https://zenodo.org/records/14314943 | CC BY 4.0 | 10.5281/zenodo.14314943 |
| Mendeley Battery | https://data.mendeley.com/datasets/v8k6bsr6tf/1 | CC BY 4.0 | 10.17632/v8k6bsr6tf.1 |
| Oxford Battery | 内部转换 | - | - |
| NASA Battery | https://ti.arc.nasa.gov/tech/dash/groups/pcoe/prognostic-data-repository/ | Public Domain | - |
| Apple Specs | 公开官方数据 | - | - |

---

**文档结束**

> **状态**: 数据验证完成，可开始建模  
> **下一步**: 运行附录代码验证数据加载，然后实现 M1+M2  
> **目标**: Hour 48 前完成 M1-M8 + E1-E3
